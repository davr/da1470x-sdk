<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SmartSnippets DA1470x SDK: Memory Controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SmartSnippets DA1470x SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memory Controller<div class="ingroups"><a class="el" href="group___p_l_a_t_f_o_r_m___d_e_v_i_c_e.html">Platform/Device</a> &raquo; <a class="el" href="group___p_l_a___d_r_i_v_e_r_s.html">Drivers</a> &raquo; <a class="el" href="group___p_l_a___d_r_i___m_e_m_o_r_y.html">Memory Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory Controller.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:hw__memctrl_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hw__memctrl_8h.html">hw_memctrl.h</a></td></tr>
<tr class="memdesc:hw__memctrl_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of API for the Memory Controller Low Level Driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmemctrl__master__priorities__t.html">memctrl_master_priorities_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Priorities for CPUC/CPUS/DMA/SNC accesses to RAM cells 1-8.  <a href="structmemctrl__master__priorities__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga07d0c653e3935c532465e899dec53db5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_w___m_e_m_c_t_r_l.html#ga07d0c653e3935c532465e899dec53db5">hw_memctrl_reset</a> (void)</td></tr>
<tr class="memdesc:ga07d0c653e3935c532465e899dec53db5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets memory controller's configuration.  <a href="group___h_w___m_e_m_c_t_r_l.html#ga07d0c653e3935c532465e899dec53db5">More...</a><br /></td></tr>
<tr class="separator:ga07d0c653e3935c532465e899dec53db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42e526987be4222bf8151c2fe273724d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_w___m_e_m_c_t_r_l.html#ga42e526987be4222bf8151c2fe273724d">hw_memctrl_config_cmac_region</a> (uint32_t data_base_addr, uint32_t shared_base_addr, uint32_t end_addr)</td></tr>
<tr class="memdesc:ga42e526987be4222bf8151c2fe273724d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures CMAC code, data and shared regions.  <a href="group___h_w___m_e_m_c_t_r_l.html#ga42e526987be4222bf8151c2fe273724d">More...</a><br /></td></tr>
<tr class="separator:ga42e526987be4222bf8151c2fe273724d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf54011ccea462d1e66608517f09caea1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_w___m_e_m_c_t_r_l.html#gaf54011ccea462d1e66608517f09caea1">hw_memctrl_config_master_priorities</a> (<a class="el" href="structmemctrl__master__priorities__t.html">memctrl_master_priorities_t</a> *master_priorities, uint8_t cpuc_max_stall_cycles, uint8_t cpus_max_stall_cycles, uint8_t dma_max_stall_cycles, uint8_t snc_max_stall_cycles)</td></tr>
<tr class="memdesc:gaf54011ccea462d1e66608517f09caea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures RAM access priority for CPUC, CPUS, DMA and SNC.  <a href="group___h_w___m_e_m_c_t_r_l.html#gaf54011ccea462d1e66608517f09caea1">More...</a><br /></td></tr>
<tr class="separator:gaf54011ccea462d1e66608517f09caea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Memory Controller. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga42e526987be4222bf8151c2fe273724d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga42e526987be4222bf8151c2fe273724d">&#9670;&nbsp;</a></span>hw_memctrl_config_cmac_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hw_memctrl_config_cmac_region </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data_base_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>shared_base_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>end_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures CMAC code, data and shared regions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data_base_addr</td><td>CMAC data address. CMAC 0x20000000 address is remapped to this value. Must be a multiple of 4. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">shared_base_addr</td><td>CMAC code address. Must be a multiple of 1024. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end_addr</td><td>The upper bound of RAM region that CMAC can access. Must end at 1024-byte boundary (10 last bits 0x3FF). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf54011ccea462d1e66608517f09caea1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf54011ccea462d1e66608517f09caea1">&#9670;&nbsp;</a></span>hw_memctrl_config_master_priorities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hw_memctrl_config_master_priorities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmemctrl__master__priorities__t.html">memctrl_master_priorities_t</a> *&#160;</td>
          <td class="paramname"><em>master_priorities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cpuc_max_stall_cycles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cpus_max_stall_cycles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dma_max_stall_cycles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>snc_max_stall_cycles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures RAM access priority for CPUC, CPUS, DMA and SNC. </p>
<p>CMAC has always priority over CPUC, CPUS, DMA and SNC.</p>
<p>When CPUC/CPUS/DMA/SNC request access to the same RAM cell, the priority fields determine which master will gain access first. For the masters that did not get priority there is an internal counter (its initial value is equal to the respective number of stall cycles) that decreases by one. When the counter reaches zero, the specific master will gain access regardless of its priority for a single cycle and the internal counter will be reset again to the initial number of stall cycles. This is done to avoid starvation of low-priority masters.</p>
<p>A possible mapping of priorities to priority/stall cycle pair values could be the following:</p><ul>
<li>HIGHEST: PRIO 2, STALL 3</li>
<li>HIGH: PRIO 2, STALL 6</li>
<li>MEDIUM: PRIO 1, STALL 9</li>
<li>LOW: PRIO 0, STALL 12</li>
<li>LOWEST: PRIO 0, STALL 15</li>
</ul>
<p>Configuring two masters with the same number of stall cycles shall be avoided, since the field was added to differentiate between masters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">master_priorities</td><td>CPUC/CPUS/DMA/SNC priorities </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cpuc_max_stall_cycles</td><td>Maximum allowed number of stall cycles for CPUC (1 - 15) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cpus_max_stall_cycles</td><td>Maximum allowed number of stall cycles for CPUS (1 - 15) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dma_max_stall_cycles</td><td>Maximum allowed number of stall cycles for DMA (1 - 15) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">snc_max_stall_cycles</td><td>Maximum allowed number of stall cycles for SNC (1 - 15) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga07d0c653e3935c532465e899dec53db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07d0c653e3935c532465e899dec53db5">&#9670;&nbsp;</a></span>hw_memctrl_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hw_memctrl_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets memory controller's configuration. </p>
<p>Shall be used only when the CMAC master is disabled. In the case of DA1469X, the SNC master shall be disabled as well. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 9 2022 13:50:41 for SmartSnippets DA1470x SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
